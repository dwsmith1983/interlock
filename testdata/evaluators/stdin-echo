#!/bin/bash
# Reads stdin, validates it's valid JSON with pipelineId field, outputs pass
input=$(cat)
pipeline_id=$(echo "$input" | jq -r '.pipelineId // empty' 2>/dev/null)
if [ -z "$pipeline_id" ]; then
    echo '{"status":"FAIL","value":{"error":"missing pipelineId in input"}}'
    exit 1
fi
echo "{\"status\":\"PASS\",\"value\":{\"receivedPipelineID\":\"$pipeline_id\"}}"
